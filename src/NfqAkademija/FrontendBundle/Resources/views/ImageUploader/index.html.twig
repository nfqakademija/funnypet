{% extends 'base.html.twig' %}

{% block body %}

    {{ form_start(imageUploader, {'attr': {'novalidate': 'novalidate'}}) }}
        {{ form_errors(imageUploader) }}

            {{ form_label(imageUploader.title, "Nuotraukos antraštė") }}
            {{ form_errors(imageUploader.title) }}
            {{ form_widget(imageUploader.title) }}
            <br />
            {{ form_label(imageUploader.tags, "") }}
            {{ form_errors(imageUploader.tags) }}
            {{ form_widget(imageUploader.tags) }}
            <br />
            {{ form_label(imageUploader.fileName, "Paveikslėlis") }}
            {{ form_errors(imageUploader.fileName) }}
            {{ form_widget(imageUploader.fileName) }}

            {{ form_row(imageUploader.upload) }}

    {{ form_end(imageUploader) }}

    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script type="text/javascript" src="http://blueimp.github.io/jQuery-File-Upload/js/vendor/jquery.ui.widget.js"></script>
    <script type="text/javascript" src="http://blueimp.github.io/jQuery-File-Upload/js/jquery.iframe-transport.js"></script>
    <script type="text/javascript" src="http://blueimp.github.io/jQuery-File-Upload/js/jquery.fileupload.js"></script>

    <script type="text/javascript">

        $(document).on("click", "#form_upload", function(event) {
            event.preventDefault();
        });

        $(document).ready(function(){
            $("#form_fileName").fileupload({
                dataType: 'json',
                Default:true,
                singleFileUploads: true,
                success: function (msg) {

                },
                add: function (e, data) {
                    $("#form_upload").prop("disabled",false);
                    $("#form_upload").off('click').on('click',function (event) {
                        event.preventDefault();
                        $("#form_upload").prop("disabled",true);
                        data.submit();
                    });
                }
            });
        });
    </script>

{% endblock %}